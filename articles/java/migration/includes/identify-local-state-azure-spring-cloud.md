---
author: yevster
ms.author: yebronsh
ms.date: 5/28/2020
ms.openlocfilehash: 70f54f911d97febf30b78888e6922e2d4ac3eb54
ms.sourcegitcommit: 81577378a4c570ced1e9c6765f4a9eee8453c889
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/08/2020
ms.locfileid: "84512623"
---
#### <a name="identify-local-state"></a>Определение локального состояния

В средах PaaS не гарантируется, что в определенный момент времени какое-либо приложение будет выполняться только один раз. Даже если предложение настроено для запуска в одном экземпляре, в следующих ситуациях может быть создана копия экземпляра:

* Приложение необходимо переместить на физический узел из-за ошибки или обновления системы.
* Выполняется обновление приложения.

В обоих случаях исходный экземпляр будет выполняться, пока не будет запущен новый экземпляр. Это имеет следующие потенциально значимые последствия для вашего приложения:

* Не гарантируется, что [отдельный](https://en.wikipedia.org/wiki/Singleton_pattern) экземпляр будет действительно отдельным.
* Все данные, которые не были сохранены во внешнем хранилище, с высокой вероятностью будут утеряны намного раньше, чем при работе с отдельным физическим сервером или виртуальной машиной.

Перед миграцией в Azure Spring Cloud убедитесь, что ваш код не содержит локальное состояние, которое не должно быть утеряно или дублировано. Если локальное состояние существует, измените код для его сохранения вне приложения. Приложения с поддержкой облака обычно сохраняют состояние приложений в следующих расположениях:

* [Кэш Azure для Redis](/azure/azure-cache-for-redis/cache-java-get-started)
* [Azure CosmosDB.](/azure/cosmos-db/create-sql-api-java)
* Другая внешняя база данных, например [Azure SQL](/azure/azure-sql/azure-sql-iaas-vs-paas-what-is-overview), [База данных Azure для MySQL](/azure/mysql/overview) или [База данных Azure для PostgreSQL](/azure/postgresql/overview).
