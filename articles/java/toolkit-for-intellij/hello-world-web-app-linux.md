---
title: Развертывание веб-приложения Hello World в контейнер Linux
titleSuffix: Azure Toolkit for IntelliJ
description: Запуск веб-приложения Hello World в контейнере Linux и его развертывание в облаке с помощью набора средств Azure для IntelliJ.
services: app-service\web
documentationcenter: java
ms.date: 09/09/2020
ms.service: multiple
ms.tgt_pltfrm: multiple
ms.topic: article
ms.custom: devx-track-java
ms.openlocfilehash: df71e27850a467e03ab58edf6beaf085b195803b
ms.sourcegitcommit: 39f3f69e3be39e30df28421a30747f6711c37a7b
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/21/2020
ms.locfileid: "90831980"
---
# <a name="deploy-java-app-to-azure-web-apps-for-containers-using-azure-toolkit-for-intellij"></a>Развертывание приложения Java в Веб-приложении Azure для контейнеров с помощью Azure Toolkit for IntelliJ

Контейнеры [Docker] широко используются при развертывании веб-приложений. При этом разработчики могут объединить все зависимости и файлы проекта в одном пакете, а затем развернуть его на сервере. Набор средств Azure Toolkit for IntelliJ упрощает этот процесс для разработчиков на языке Java, предоставляя функции для развертывания контейнеров в Microsoft Azure.

В этой статье показаны действия, необходимые для создания базового веб-приложения Hello World и его публикации в контейнере Linux в Azure с помощью набора средств Azure для IntelliJ.

[!INCLUDE [prerequisites](includes/prerequisites.md)]
* Клиент [Docker].

> [!NOTE]
>
> Для работы с этим руководством необходимо настроить [Docker], чтобы он имел возможность предоставить управляющую программу на порте 2375 без протокола TLS. Этот параметр можно настроить при установке Docker или с помощью меню параметров Docker.
>
> ![Меню параметров Docker][docker-settings-menu]
>

## <a name="installation-and-sign-in"></a>Установка и вход

Следующие шаги описывают процесс входа в Azure в среде разработки IntelliJ.

1. Если вы еще не установили подключаемый модуль, см. статью [Установка Azure Toolkit for IntelliJ](installation.md).

1. Чтобы войти в учетную запись Azure, перейдите к левой боковой панели **Azure Explorer**, а затем щелкните значок **входа в Azure**. Кроме того, можно открыть раздел **Средства**, развернуть пункт **Azure** и щелкнуть значок **входа в Azure**.

   :::image type="content" source="media/sign-in-instructions/I01.png" alt-text="Вход в Azure из IntelliJ."::: 

1. В окне **Azure Sign In** (Вход в Azure) выберите **Device Login** (Имя пользователя устройства) и щелкните **Sign in** (Вход) ([другие варианты входа](sign-in-instructions.md)).

1. В диалоговом окне **Azure Device Login** (Вход на устройство Azure) щелкните **Copy&Open** (Копировать и открыть).

1. В браузере вставьте код устройства (скопированный при нажатии **Copy&Open** (Копировать и открыть) на последнем шаге), а затем нажмите кнопку **Далее**.

1. Выберите нужную учетную запись Azure и выполните все необходимые для входа процедуры аутентификации.

1. Завершив вход, закройте браузер и вернитесь в интегрированную среду разработки IntelliJ. В диалоговом окне **Select Subscriptions** (Выбор подписок) выберите нужные подписки и щелкните **ОК**.

## <a name="creating-a-new-web-app-project"></a>Создание проекта веб-приложения

1. В меню **File** (Файл) разверните пункт **New** (Создать), а затем щелкните **Проект** (Project).

1. В диалоговом окне **New Project** (Новый проект) выберите **Maven** и убедитесь, что установлен флажок **Create from Archetype** (Создать из архетипа). В списке вариантов выберите **maven-archetype-webapp**, а затем щелкните **Далее**.

   :::image type="content" source="media/create-hello-world-web-app/maven-archetype-webapp.png" alt-text="Выбор варианта maven-archetype-webapp."::: 

1. Раскройте список **Artifact Coordinates** (Координаты артефакта), чтобы просмотреть все поля ввода и указать приведенные ниже сведения о новом веб-приложении, а затем щелкните **Далее**.

   * **Name** (Имя). Название вашего веб-приложения. Это значение автоматически помещается в поле **ArtifactId** для веб-приложения.
   * **GroupId** (Идентификатор группы). Имя группы артефактов. Как правило, это домен компании (например, *com.microsoft.azure*).
   * **Версия.** Мы сохраним здесь версию по умолчанию *1.0-SNAPSHOT*.

1. Настройте любые параметры Maven или примите значения по умолчанию и щелкните **Готово**.

1. Перейдите к проекту на вкладке **Project** (Проект) слева и откройте файл **src/Main/webapp/WEB-INF/index.jsp**. Замените его содержимое следующим кодом и **сохраните изменения**:

   ```html
   <html>
    <body>
      <b><% out.println("Hello World!"); %></b>
    </body>
   </html>
   ```
   :::image type="content" source="media/create-hello-world-web-app/open-index-page.png" alt-text="Открытие файла index.jsp.":::

## <a name="create-an-azure-container-registry-to-use-as-a-private-docker-registry"></a>Создание реестра контейнеров Azure для использования в качестве частного реестра Docker

Ниже рассмотрена процедура использования портала Azure для создания реестра контейнеров Azure.

> [!NOTE]
>
> Если вы хотите использовать Azure CLI, а не портал Azure, выполните процедуру, описанную в разделе [Создание частного реестра контейнеров Docker с помощью Azure CLI 2.0][Create Docker Registry using Azure CLI].
>

1. Перейдите на [портал Azure] и выполните вход.

   После входа в свою учетную запись на портале Azure можно выполнить процедуру, описанную в статье [Создание частного реестра контейнеров Docker с помощью портала Azure], которую здесь полезно представить еще раз.

1. Щелкните значок меню **+ Создать ресурс**, а затем щелкните категорию **Контейнеры** и выберите **Реестр контейнеров**.

1. Когда отобразится страница **Создать реестр контейнеров**, укажите следующие сведения:

   * **Подписка**: Определяет подписку Azure, которую нужно использовать для нового реестра контейнеров.

   * **Группа ресурсов**. Определяет группу ресурсов для реестра контейнеров. Выберите один из следующих вариантов.
      * **Создать**. Определяет, что нужно создать группу ресурсов.
      * **Использовать существующую**. Определяет, что нужно выбрать группу ресурсов, связанную с учетной записью Azure.

   * **Имя реестра.** Указывает имя для нового реестра контейнеров.

   * **Расположение.** Указывает регион, в котором будет создан реестр контейнеров (например, "Западная часть США").

   * **SKU**: Указывает уровень служб для нового реестра контейнеров. Для работы с этим учебником выберите *Базовый*. Дополнительные сведения см в статье [Уровни службы Реестра контейнеров Azure](/azure/container-registry/container-registry-skus).

1. Щелкните **Проверить и создать** и убедитесь, что сведения верны. Для завершения нажмите кнопку **Создать**.

## <a name="deploy-your-web-app-in-a-docker-container"></a>Развертывание веб-приложения в контейнере Docker

Ниже приведены инструкции по настройке поддержки Docker в веб-приложении и по развертыванию этого веб-приложения.

1. Перейдите к проекту на вкладке **Project** (Проект) слева и щелкните проект правой кнопкой мыши. Разверните элемент **Azure** и щелкните **Add Docker Support** (Добавить поддержку Docker).

   Файл Docker будет автоматически создан с конфигурацией по умолчанию.

   :::image type="content" source="media/hello-world-web-app-linux/docker-support-file.png" alt-text="Файл поддержки Docker.":::

1. Добавив поддержку Docker, щелкните проект правой кнопкой мыши в обозревателе проектов, выберите **Azure**, а затем — **Run on Web App for Containers** (Выполнить в веб-приложении для контейнеров).

1. В диалоговом окне **Run on Web App for Containers** (Выполнение в веб-приложении для контейнеров) введите следующие сведения:

   * **Name** (Имя). Понятное имя, отображаемое в наборе средств Azure. 

   * **Container Registry** (Реестр контейнеров). Выберите в раскрывающемся меню реестр контейнеров, который вы создали в предыдущем разделе этой статьи. Поля **Server URL** (URL-адрес сервера), **Username** (Имя пользователя) и **Password** (Пароль) будут заполнены автоматически.

   * **Image and tag** (Образ и тег). Имя образа контейнера. Обычно используется следующий синтаксис: *registry*.azurecr.io/*appname*:latest, где: 
      * *registry* — это реестр контейнеров из предыдущего раздела этой статьи; 
      * *appname* — это имя веб-приложения. 

   * **Use Existing Web App** (Использовать имеющееся веб-приложение) или **Create New Web App** (Создать веб-приложение) — указывает, будете ли вы развертывать контейнер в имеющемся веб-приложении или создадите веб-приложение. С помощью указанного вами **имени приложения** будет создан URL-адрес для вашего веб-приложения, например: *wingtiptoys.azurewebsites.net*.

   * **Группа ресурсов**. Указывает, создадите ли вы группу ресурсов или будете использовать существующую. 

   * **App Service Plan** (План службы приложений). Указывает, создадите ли вы план службы приложений или будете использовать существующий. 

1. Настроив перечисленные выше параметры, нажмите кнопку **Run** (Выполнить). После успешного развертывания веб-приложения его состояние будет отображаться в окне **Run** (Выполнение).

1. После публикации веб-приложения вы можете перейти к указанному для него ранее URL-адресу, например *wingtiptoys.azurewebsites.net*.

   ![Переход к веб-приложению][browsing-to-web-app]

## <a name="optional-modify-your-web-app-publish-settings"></a>Необязательное действие: Изменение параметров для публикации веб-приложения

1. После публикации веб-приложения параметры будут сохранены в качестве параметров по умолчанию. Приложение можно запустить в Azure, щелкнув значок зеленой стрелки на панели инструментов. Вы можете изменить параметры, щелкнув раскрывающееся меню для веб-приложения, а затем — **Edit Configurations** (Изменить конфигурации).

    :::image type="content" source="media/create-hello-world-web-app/edit-configuration-menu.png" alt-text="Пункт меню "Изменить конфигурацию"":::.

1. При отображении диалогового окна **Run/Debug Configurations** (Конфигурации выполнения и отладки) можно изменить любые параметры по умолчанию, а затем нажать кнопку **ОК**.

## <a name="next-steps"></a>Дальнейшие действия

Дополнительные материалы по Docker доступны на официальном [веб-сайте Docker][Docker].

[!INCLUDE [additional-resources](includes/additional-resources.md)]

<!-- URL List -->

[Портал Azure]: https://portal.azure.com/
[Создание частного реестра контейнеров Docker с помощью портала Azure]: /azure/container-registry/container-registry-get-started-portal
[Azure for Java Developers]: ../index.yml
[Java Tools for Visual Studio Team Services]: https://java.visualstudio.com/
[Create Docker Registry using Azure CLI]: /azure/container-registry/container-registry-get-started-azure-cli

[Docker]: https://www.docker.com/
[Configuring artifacts]: https://www.jetbrains.com/help/idea/2016.1/configuring-artifacts.html

<!-- IMG List -->

[browsing-to-web-app]:  media/hello-world-web-app-linux/browsing-to-web-app.png
[docker-settings-menu]: media/hello-world-web-app-linux/docker-settings-menu.png