---
title: Создание субъекта-службы Azure с помощью Node.js
description: Узнайте, как использовать проверку подлинности субъекта-службы в Azure с помощью Node.js и JavaScript.
ms.topic: how-to
ms.date: 09/30/2020
ms.custom: devx-track-js
ms.openlocfilehash: 4384582d0c24209927bef971a1bc76d8322c18c0
ms.sourcegitcommit: 0b1c751c5a4a837977fec1c777bca5ad15cf2fc7
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/01/2020
ms.locfileid: "91621660"
---
# <a name="create-an-azure-service-principal-for-nodejs"></a>Создание субъекта-службы Azure для Node.js

Если у вас есть приложение, которому нужно предоставить доступ к ресурсам, вы можете настроить для такого приложения удостоверение и выполнить для него аутентификацию с помощью собственных учетных данных. Такое удостоверение называется *субъект-служба*. По сути, вы создаете ключи для учетной записи Azure Active Directory, которые затем предоставляете пакету SDK для аутентификации. При этом пользователю не нужно вводить имя пользователя и пароль.

Использование субъекта-службы позволяет выполнять следующие задачи.
- Назначить удостоверению приложения разрешения, которые отличаются от ваших разрешений. Как правило, приложение получает именно те разрешения, которые требуются для его работы.
- Использовать сертификат для аутентификации при выполнении автоматического скрипта.

В этой статье описано три способа создания субъекта-службы.

- Портал Azure
- Azure CLI 2.0

[!INCLUDE [chrome-note](includes/chrome-note.md)]

## <a name="create-a-service-principal-using-the-azure-portal"></a>Создание субъекта-службы с помощью портала Azure

Чтобы создать субъект-службу, выполните инструкции из руководства по [созданию приложения Azure Active Directory и субъекта-службы с доступом к ресурсам с помощью портала](/azure/active-directory/develop/howto-create-service-principal-portal).

## <a name="create-a-service-principal-using-the-azure-cli-20"></a>Создание субъекта-службы с помощью Azure CLI 2.0

Чтобы создать субъект-службу с помощью [Azure CLI 2.0](/cli/azure/install-az-cli2), сделайте следующее:

1. Загрузите [Azure CLI 2.0](/cli/azure/install-az-cli2).

2. Откройте окно терминала и введите команду `az login`, чтобы начать вход.

3. Вызов команды `az login` возвращает URL-адрес и код. Откройте указанный URL-адрес, введите код и войдите с помощью удостоверения Azure (это может произойти автоматически, если вы уже выполняли такой вход). У вас появится доступ к учетной записи через интерфейс командной строки.

4. Получите свою подписку и идентификатор арендатора с помощью команды `az account list`. Эти данные понадобятся вам при работе с любыми пакетами Azure. Ниже приведен пример выходных данных этой команды:

    ```shell
    {
    "cloudName": "AzureCloud",
    "id": "<subscriptionId>",
    "isDefault": true,
    "name": "<subscriptionName>",
    "registeredProviders": [],
    "state": "Enabled",
    "tenantId": "<tenantId>",
        "user": {
            "name": "hello@example.com",
            "type": "user"
        }
    }
    ```

5. Выполните действия, описанные в статье [Создание субъекта-службы Azure с помощью Azure CLI](/cli/azure/create-an-azure-service-principal-azure-cli), чтобы создать субъект-службу. Объект JSON в выходных данных будет содержать сведения, требуемые для аутентификации в Azure.


## <a name="using-the-service-principal"></a>Использование субъекта-службы

Получив субъект-службу, выполните действия, отписанные в статье [Аутентификация с использованием модулей Azure для Node.js](./node-sdk-azure-authenticate.md), чтобы создать объект учетных данных, который можно использовать для аутентификации клиента с помощью Azure Active Directory.
