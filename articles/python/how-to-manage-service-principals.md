---
title: Управление локальными субъектами-службами для разработки в Azure
description: В этой статье объясняется, как управлять субъектами-службами, созданными для локальной разработки, с помощью портала Azure или Azure CLI.
ms.date: 05/12/2020
ms.topic: conceptual
ms.custom: devx-track-azurecli
ms.openlocfilehash: e29ee999472d0d9d141cfad728e62f1fe518e85b
ms.sourcegitcommit: e451e4360d9c5956cc6a50880b3a7a55aa4efd2f
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/31/2020
ms.locfileid: "87478363"
---
# <a name="how-to-manage-service-principals"></a>Управление субъектами-службами

Из соображений безопасности мы рекомендуем всегда тщательно следить за тем, какие разрешения предоставляются коду приложения для доступа к ресурсам Azure и их изменения. При локальном тестировании кода не проводите тест от имени пользователя с полными правами. Вместо этого обязательно используйте локальный *субъект-службу*, как описано в [этом разделе статьи о настройке локальной среды разработки Python](configure-local-development-environment.md#configure-authentication).

В дальнейшем вам может понадобиться удалять, переименовывать эти субъекты-службы или выполнять с ними другие действия. Это можно делать с помощью портала Azure или Azure CLI.

## <a name="basics-of-azure-authorization"></a>Основные сведения об авторизации Azure

Когда ваш код пытается выполнить любую операцию с ресурсами Azure (через использование классов в библиотеках Azure), Azure проверяет, есть ли у приложения разрешение на выполнение такого действия. Разрешения каждому удостоверению приложения назначаются на основе определенной роли или ресурса. Это делается на [портале Azure](https://portal.azure.com) или с помощью Azure CLI. Такая процедура помогает ограничить назначаемые разрешения только необходимыми. Это снижает риски в случае взлома приложения злоумышленниками.

Когда приложение развернуто в Azure, его удостоверение обычно совпадает с именем приложения в службе, в которой оно размещено (например, в Службе приложений Azure, в решении "Функции Azure", на виртуальной машине и т. д., если используется управляемое удостоверение). Когда вы запускаете код локально, службы размещения не участвуют в этом процессе. Поэтому вам необходимо предоставить Azure подходящую замену.

С этой целью используется локальный *субъект-служба*. По сути, это другое название для удостоверения приложения (в противоположность удостоверению пользователя). У субъекта-службы есть имя, идентификатор "арендатора" (по сути, идентификатор вашей организации), идентификатор приложения или "клиента" и секрет или пароль. Этих учетных данных достаточно для аутентификации удостоверения в Azure и последующей проверки прав этого удостоверения на доступ к конкретному ресурсу.

У каждого разработчика должен быть свой субъект-служба, хранящийся в учетной записи пользователя на рабочей станции. Субъект-службу нельзя хранить в репозиториях с системой управления версиями. В случае кражи или взлома субъекта-службы его можно удалить на портале Azure, чтобы отозвать все его разрешения, а затем создать новый субъект-службу для этого разработчика.

## <a name="manage-service-principals-using-the-azure-portal"></a>Управление субъектами-службами с помощью портала Azure

1. Войдите на [портал Azure](https://portal.azure.com).

1. Перейдите на страницу **Azure Active Directory**. Для этого щелкните соответствующий значок на домашней странице портала или введите "Azure Active Directory" в поле поиска.

    ![Как найти Azure Active Directory на портале Azure](media/how-to-manage-service-principals/azure-ad-portal-search.png)

1. В меню навигации слева выберите раздел **Управление** > **Регистрация приложений**. Ваши субъекты-службы для локальной разработки будут показаны в списке приложений.

    ![Зарегистрированные приложения в Azure Active Directory](media/how-to-manage-service-principals/azure-ad-app-registrations.png)

1. Выберите любой субъект-службу, чтобы открыть его страницу свойств. На ней можно посмотреть идентификаторы, переименовать или удалить субъект-службу и получить различные URL-адреса конечных точек.

1. Процедура авторизации субъекта-службы для доступа к определенному ресурсу обычно зависит от службы. Дополнительные сведения см. в документации по этой службе. Например в статьях об авторизации для [хранилища больших двоичных объектов](/azure/storage/common/storage-auth-aad-rbac-portal) и [хранилища очередей](/azure/storage/common/storage-auth-aad-rbac-portal) описана процедура авторизации в службе хранилища Azure.

## <a name="manage-service-principals-using-the-azure-cli"></a>Управление субъектами-службами с помощью Azure CLI

С помощью Azure CLI можно выполнять многие операции с субъектами-службами, доступные через портал Azure.

- Создание, просмотр, обновление и удаление субъектов-служб: команда [az ad sp](/cli/azure/ad/sp?view=azure-cli-latest). Дополнительная информация также приведена в статье [Создание субъекта-службы Azure с помощью Azure CLI](/cli/azure/create-an-azure-service-principal-azure-cli?view=azure-cli-latest).
- Управление назначениями ролей: команда [az role assignment](/cli/azure/role/assignment?view=azure-cli-latest).

См. также

- [Аутентификация в Azure с помощью библиотек Azure](azure-sdk-authenticate.md)
