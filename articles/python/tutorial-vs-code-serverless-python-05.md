---
title: Шаг 5. Развертывание бессерверных функций Azure на Python с помощью VS Code
description: Шаг учебника 5. Развертывание бессерверного кода функции Python в Azure и выполнение потоковой передачи журналов и синхронизации параметров между локальным проектом и Azure.
ms.topic: conceptual
ms.date: 11/30/2020
ms.custom: devx-track-python, seo-python-october2019, contperf-fy21q2
ms.openlocfilehash: 24c24aa7a52b756688449eafa0645d0ac971cea3
ms.sourcegitcommit: 4f9ce09cbf9663203c56f5b12ecbf70ea68090ed
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/06/2021
ms.locfileid: "97911384"
---
# <a name="5-deploy-azure-functions-in-python"></a>5: Развертывание решения "Функции Azure" на Python

[Предыдущий шаг: локальная отладка](tutorial-vs-code-serverless-python-04.md)

Развертывание функции в Azure предусматривает создание приложения Функций в Azure, а также других необходимых ресурсов Azure. позволяющее группировать функции в логические единицы и упростить развертывание и совместное использование ресурсов, а также управление ими.

Для работы приложения-функции требуется учетная запись хранения Azure для данных и [план размещения](/azure/azure-functions/functions-scale#hosting-plan-support). Все эти ресурсы собраны в одну группу ресурсов.

1. В области **Azure: функции** выберите команду **Развернуть в приложении-функции** или откройте палитру команд (клавиша **F1**) и выберите команду **Функции Azure: развертывание в приложение-функцию**. Приложение-функция — это расположение, в котором выполняется проект Python в Azure.

    ![Развертывание функции Python в приложении-функции Azure](media/tutorial-vs-code-serverless-python/deploy-a-python-fuction-to-azure-function-app.png)

1. При появлении запроса (**Выберите приложение-функцию в Azure**) выберите вариант **Создать приложение-функцию в Azure** и укажите имя, которое будет уникальным в пределах всей платформы Azure (обычно для этого используют сочетание личного имени или названия организации с другими уникальными идентификаторами; в имени допускаются буквы, цифры и дефисы).

    Если вы уже создали приложение-функцию, его имя отображается в списке вариантов.

1. При появлении двух следующих запросов выберите версию Python и расположение Azure.

1. Расширение выполняет перечисленные ниже действия. Этот процесс занимает несколько минут и его можно отслеживать по всплывающим сообщениям и в **окне вывода** Visual Studio Code.

    - Создайте группу ресурсов, используя заданное вами имя (без дефисов) в выбранном расположении.
    - Создайте учетную запись хранения, план размещения и приложение-функцию в этой группе ресурсов. Функции Azure по умолчанию используют [план потребления](/azure/azure-functions/functions-scale#consumption-plan). Чтобы выполнять функции в выделенном плане, следует [включить публикацию с дополнительными параметрами создания](/azure/azure-functions/functions-develop-vs-code).
    - Развертывание кода в новом приложении-функции.

    В обозревателе **Azure: функции** также отображается ход выполнения:

    ![Индикатор хода выполнения развертывания в Azure: Обозреватель функций](media/tutorial-vs-code-serverless-python/deployment-progress-indicator-in-azure-function-explorer.png)

1. Когда развертывание завершится, расширение Функций Azure отобразит сообщение с кнопками для трех дополнительных действий:

    ![Сообщение об успешном выполнении развертывания с дополнительными действиями](media/tutorial-vs-code-serverless-python/azure-functions-deployment-success-with-additional-actions.png)

    Сведения о **потоковой передаче журналов** и **отправке параметров** см. в разделах ниже.

1. Выберите **Просмотреть выходные данные**, чтобы переключиться в окно **Выходные данные**. Отобразится общедоступная конечная точка в Azure (URL-адрес конкретной конечной точки будет соответствовать имени, указанному вами для приложения-функции).

    <pre>
    1:38:04 PM vscode-azure-functions: HTTP Trigger Urls:
      HttpExample: https://vscode-azure-functions.azurewebsites.net/api/HttpExample
    </pre>

    Вы можете выполнить с помощью этой конечной точкой такие же тесты, какие выполняются локально, используя параметры URL-адреса и (или) запросы с данными JSON в тексте запроса. Результаты, возвращаемые общедоступной конечной точкой, должны совпадать с результатами локальной конечной точки, которую вы тестировали ранее в [части 4](tutorial-vs-code-serverless-python-04.md).

## <a name="examine-logs-live-metrics"></a>Анализ журналов (Live Metrics)

Кнопка **Журналы потоковой передачи** во всплывающем окне сообщения о развертывании открывает браузер с окном раздела **Live Metrics** для вашей функции на портале Azure. Вы также можете подключиться к метрикам в обозревателе **Функций Azure**, щелкнув правой кнопкой мыши имя проекта функции и выбрав пункт **Начать потоковую передачу журналов**.

## <a name="sync-local-settings-to-azure"></a>Синхронизация локальных параметров в Azure

Кнопка **Отправить параметры** во всплывающем окне с сообщением о развертывании позволяет применить в Azure все изменения, внесенные в файл *local.settings.json*. Вы также можете вызвать эту команду в обозревателе **Функций Azure**, развернув узел проекта функции, щелкнув правой кнопкой мыши **Параметры приложения** и выбрав пункт **Отправить локальные параметры**. Вы также можете использовать палитру команд, выбрав на ней команду **Функции Azure: отправка локальных параметров**.

При отправке параметров обновляются все существующие параметры и добавляются новые параметры, которые определены в файле *local.settings.json*. При отправке из Azure не удаляются параметры, которые отсутствуют в локальном файле. Чтобы удалить такие параметры, разверните узел **Параметры приложения** в обозревателе **Функций Azure**, щелкните удаляемый параметр правой кнопкой мыши и выберите **Удалить параметр**. Кроме того, параметры можно редактировать непосредственно на портале Azure.

Чтобы сохранить изменения, которые вы внесли на портале или в **обозревателе Azure** в файл *local.settings.json*, щелкните правой кнопкой мыши узел **Параметры приложения** и выберите **Скачать удаленные параметры**. Вы также можете использовать палитру команд, выбрав на ней команду **Функции Azure: скачать удаленные параметры**.

> [!div class="nextstepaction"]
> [Функции развернуты — перейти к шагу 6 >>>](tutorial-vs-code-serverless-python-06.md)

[Возникли проблемы? Сообщите нам!](https://aka.ms/python-functions-qs-ms-survey)
