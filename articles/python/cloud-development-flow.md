---
title: Поток разработки в Azure
description: Общие сведения о цикле разработки в облаке в Azure, включающем в себя подготовку, написание кода, тестирование, развертывание и управление.
ms.date: 02/16/2021
ms.topic: conceptual
ms.custom: devx-track-python
ms.openlocfilehash: c2187f43da3159cc623e2ace671561ece2cf1758
ms.sourcegitcommit: b882128a763f81dba83913bfff1e9cd1ec70818f
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/17/2021
ms.locfileid: "100642290"
---
# <a name="the-azure-development-flow-provision-code-test-deploy-and-manage"></a>Поток разработки Azure: подготовка, написание кода, тестирование, развертывание и управление

Предыдущая статья: [Подготовка ресурсов в Azure, получения к ним доступа и управление ими](cloud-development-provisioning.md)

Теперь, когда вы ознакомились с моделью служб и ресурсов Azure, вы можете получить представление об общем потоке разработки облачных приложений с помощью Azure: **подготовка**, **написание кода**, **тестирование**, **развертывание** и **управление**.

| Шаг | Основные средства | Действия |
| --- | --- | --- |
| Подготовка | Azure CLI, портал Azure, Cloud Shell, скрипты Python на основе библиотек управления Azure | Подготовка групп ресурсов; подготовка определенных ресурсов в группах; подготовка ресурсов к использованию из кода приложения и (или) к получению кода Python в развертываниях. |
| Код | Редактор кода (например, Visual Studio Code), библиотеки Azure, справочная документация | Создание кода Python с использованием клиентских библиотек Azure для взаимодействия с подготовленными ресурсами. |
| Тест | Среда выполнения и отладчик Python | Локальное выполнение кода Python с обращениями к активным облачным ресурсам (обычно применяется для ресурсов разработки или тестирования, но не для рабочих ресурсов). Сам код еще не размещен в Azure, что помогает быстрее выполнять отладку и итерации. |
| Развертывание | Azure CLI, GitHub, DevOps | Развертывание кода после завершения тестирования в соответствующей службе размещения Azure, откуда этот код будет выполняться в облаке. Развернутый код обычно обращается к ресурсам в промежуточной или рабочей среде. |
| Управление | Azure CLI, портал Azure, скрипты Python, Azure Monitor | Мониторинг производительности и скорости реагирования приложений, внесение изменений в рабочую среду, перенос улучшений обратно в среду разработки для следующего цикла подготовки и разработки. |

## <a name="step-1-provision-and-configure-resources"></a>Шаг 1. Подготовка и настройка ресурсов

Как описано в [предыдущей статье этой серии](cloud-development-provisioning.md), первым этапом в разработке любого приложения является подготовка и настройка ресурсов, составляющих целевую среду для приложения.

Подготовка начинается с создания группы ресурсов в подходящем регионе Azure. Группу ресурсов можно создать с помощью портала Azure, Azure CLI или пользовательского скрипта, использующего библиотеки Azure (или REST API).

В этой группе ресурсов вы затем подготавливаете и настраиваете отдельные необходимые ресурсы с помощью портала, CLI или библиотек Azure. (Снова-таки, обзор доступных типов ресурсов см. в [руководстве для разработчика Azure](/azure/guides/developer/azure-developer-guide).)

Конфигурация включает в себя настройку политик доступа, определяющих, какие удостоверения (субъекты-службы и идентификаторы приложений) могут получать доступ к этим ресурсам. Управление политиками доступа обычно осуществляется с помощью [управления доступом на основе ролей (RBAC)](/azure/role-based-access-control/overview). Но некоторые службы предполагают и другие элементы управления доступом. Как разработчик облачных вычислений, работающий с Azure, обязательно ознакомьтесь с RBAC, так как этот механизм используется практически с любым ресурсом, для которого актуален вопрос обеспечения безопасности.

В большинстве сценариев работы приложений скрипты подготовки, как правило, создаются с помощью Azure CLI и (или) кода Python и библиотек Azure. Эти скрипты описывают совокупность потребностей вашего приложения в ресурсах (фактически определяя пользовательский облачный компьютер, на котором вы развертываете приложение). Скрипт позволяет легко воссоздать аналогичный набор ресурсов в разных средах разработки, тестирования, в промежуточных и рабочих средах, что позволяет обойтись без выполнения повторяющихся действий на портале Azure вручную. Также скрипты позволяют легко подготовить среду в другом регионе или использовать разные группы ресурсов. Эти скрипты также можно хранить в репозиториях системы управления версиями, чтобы иметь в наличии полный журнал аудита и изменений.

## <a name="step-2-write-your-app-code-to-use-resources"></a>Шаг 2. Написание кода приложения для использования ресурсов

После подготовки ресурсов, необходимых для вашего приложения, напишите код приложения, учитывающий аспекты времени выполнения этих ресурсов.

Например, на этапе подготовки вы могли создать учетную запись хранения Azure, контейнер больших двоичных объектов в этой учетной записи и настроить политики доступа для приложения в этом контейнере. Этот процесс описан в статье [Пример. Подготовка службы хранилища Azure с помощью библиотек Azure для Python](azure-sdk-example-storage.md). Теперь с помощью этой учетной записи хранения вы можете пройти аутентификацию, используя код, а затем создать, обновить или удалить большие двоичные объекты в этом контейнере. Этот процесс описан в статье [Пример Подготовка службы хранилища Azure с помощью библиотек Azure для Python](azure-sdk-example-storage.md). Аналогично вы можете подготовить базу данных со схемой и соответствующими разрешениями (см. статью [Пример. Использование библиотек Azure для подготовки базы данных](azure-sdk-example-database.md)), чтобы код приложения мог подключаться к базе данных и выполнять обычные запросы на создание, чтение, обновление и удаление.

Код приложения обычно использует переменные среды для получения имен и URL-адресов используемых ресурсов. Переменные среды позволяют легко переключаться между облачными средами (сред разработки и тестирования, а также промежуточной и рабочей среды) без внесения изменений в код. Различные службы Azure, в которых размещается код приложения, предоставляют средства для определения необходимых переменных. Например, в Службе приложений Azure (для размещения веб-приложений) и Функциях Azure (бессерверный узел Azure) вы с помощью портала Azure или Azure CLI можете определить *параметры приложения*, которые затем отображаются в коде в виде переменных среды.

Разработчик Python обычно создает код приложения на Python, используя библиотеки Azure для Python. С другой стороны любая независимая часть облачного приложения может быть написана на любом поддерживаемом языке. Например, если вы работаете в команде, которая имеет опыт работы с различными языками программирования, то вполне возможно, что некоторые части приложения написаны на языке Python, некоторые на JavaScript или Java, а другие на языке C#.

Обратите внимание, что код приложения может использовать библиотеки Azure для выполнения операций подготовки и управления по мере необходимости. Точно так же скрипты подготовки могут использовать библиотеки для инициализации ресурсов с конкретными данными или выполнять задачи обслуживания в облачных ресурсах, даже если эти скрипты выполняются локально.

## <a name="step-3-test-and-debug-your-app-code-locally"></a>Шаг 3. Локальное тестирование и отладка кода приложения

Разработчики обычно тестируют код приложения на своих локальных рабочих станциях, прежде чем развертывать его локально в коде приложения для облачного тестирования. Это означает, что вы обычно получаете доступ к другим ресурсам, которые уже подготовлены в облаке, таким как хранилище, базы данных и т. д. Разница заключается в том, что вы еще не используете сам код приложения в облачной службе.

Запустив код локально, вы также можете воспользоваться всеми преимуществами функций отладки, предоставляемыми такими инструментами как Visual Studio Code, и управлять кодом в репозитории системы управления версиями.

Вам не нужно изменять код для локального тестирования. Azure полностью поддерживает локальную разработку и отладку с помощью того же кода, который вы развертываете в облаке. И снова нам помогут переменные среды, через которые ваш код сможет получать параметры ресурсов размещения в облаке. Создавая эти же переменные среды локально, один и тот же код выполняется без изменения. Этот шаблон работает для учетных данных проверки подлинности, URL-адресов ресурсов, строк подключения и любых других параметров, что упрощает использование ресурсов в среде разработки при локальном запуске кода и рабочих ресурсов после развертывания кода в облаке.

## <a name="step-4-deploy-your-app-code-to-azure"></a>Шаг 4. Развертывание приложения в Azure

После локального тестирования кода вы можете развернуть его в ресурсе Azure, подготовленном для размещения. Например, если вы создаете веб-приложение Django, то развернете этот код на виртуальной машине (где вы предоставляете собственный веб-сервер) или в службе приложений Azure (которая предоставляет веб-сервер). После развертывания этот код будет выполняться на сервере, а не на локальном компьютере, и сможет получить доступ ко всем ресурсам Azure, для которых он разрешен.

Как отмечалось в предыдущем разделе, в стандартных процессах разработки вы сначала развертываете код в ресурсах, подготовленных в среде разработки. После цикла тестирования вы развертываете код в ресурсах в промежуточной среде, благодаря чему приложение становится доступным для команды тестирования и, возможно, для клиентов предварительной версии. Если вас устраивает производительность приложения, вы можете развернуть код в рабочей среде. Все эти развертывания также можно автоматизировать благодаря непрерывной интеграции и непрерывному развертыванию с помощью Azure DevOps.

Однако после развертывания кода в облаке он действительно становится облачным приложением, полностью выполняющимся на серверных компьютерах в центрах обработки данных Azure.

## <a name="step-5-manage-monitor-and-revise"></a>Шаг 5. Управление, мониторинг и изменения

После развертывания необходимо убедиться в том, что приложение выполняется надлежащим образом, а также отвечает на запросы клиентов и эффективно использует ресурсы (с минимальными затратами). При необходимости вы можете управлять автоматическим масштабированием развертывания с помощью Azure, а также получать и отслеживать данные о производительности с помощью портала Azure, Azure CLI или пользовательских скриптов, написанных с помощью библиотек Azure. Затем можно внести корректировки в реальном времени для подготовленных ресурсов, чтобы оптимизировать производительность, используя любой из тех же инструментов.

Мониторинг позволяет получить представление о том, как вы можете изменить структуру облачного приложения. Например, вы можете обнаружить, что определенные части веб-приложения (например, группа конечных точек API) используются относительно редко по сравнению с основными частями. Затем вы можете развернуть эти API отдельно как бессерверные Функции Azure, где у них есть собственные вычислительные ресурсы резервного копирования, которые не конкурируют с основным приложением и имеют низкую стоимость. После этого основное приложение будет быстрее реагировать на большее количество клиентов без необходимости перехода на более высокую ценовую категорию.

## <a name="next-steps"></a>Дальнейшие действия

Теперь вы знакомы с базовой структурой Azure и общим потоком разработки: подготовкой ресурсов, написанием и тестированием кода, развертыванием кода в Azure, отслеживанием ресурсов и управлением ими.

Следующий шаг — знакомство с библиотеками Azure для Python, которые будут использоваться на многих этапах потока.

> [!div class="nextstepaction"]
> [Использование библиотек Azure для Python >>>](azure-sdk-overview.md)
